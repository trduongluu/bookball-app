<div class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="text-center d-lg-none w-100">
    <button class="navbar-toggler dropdown-toggle" data-target="#navbar-second" data-toggle="collapse" type="button">
      <i class="icon-menu7 mr-2"></i> </button></div>
  <div class="navbar-collapse collapse p-0" id="navbar-second">
    <ul class="nav navbar-nav">
      <li class="nav-item">
        <a class="navbar-nav-link" href="javascript:;" [ngClass]="{'active show': openTab === 1}" (click)="openTab = 1">
          <i class="icon-magazine mr-2"></i>
          Cơ bản </a></li>
      <li class="nav-item">
        <a class="navbar-nav-link" href="javascript:;" [ngClass]="{'active show': openTab === 2}" (click)="openTab = 2">
          <i class="icon-calendar mr-2"></i>Lịch thanh toán </a></li>
      <li class="nav-item">
        <a class="navbar-nav-link" href="javascript:;" [ngClass]="{'active show': openTab === 3}" (click)="openTab = 3">
          <i class="icon-certificate mr-2"></i>Tài liệu </a></li>
    </ul>
  </div>
</div>

<div class="tab-content w-100 overflow-auto">
  <div class="tab-pane fade mt-2" [ngClass]="{'active show': openTab === 1}">
    <form class="form-horizontal" [formGroup]="myForm" novalidate>
      <div class="card">
        <div class="card-body">
          <!-- Content area -->
          <fieldset>
            <legend class="font-weight-semibold text-uppercase font-size-sm"> Thông tin cơ bản
            </legend>
            <div class="row">
              <div class="form-group col-md-6">
                <label>Tên dự án <span class="text-danger"> * </span></label>
                <input-select class="form-control" formControlName="projId" [items]="listProject"
                  [placeholder]="'Lựa chọn'" (onChange)="getPackageBids($event)">
                </input-select>
                <render-error [data]="myForm.get('projId')"></render-error>
              </div>
              <div class="form-group col-md-6">
                <label>Tên gói thầu <span class="text-danger"><b> *</b></span> </label>
                <input-select class="form-control" formControlName="packageBidsId" [items]="listPackageBids"
                  [placeholder]="'Lựa chọn'">
                </input-select>
                <render-error [data]="myForm.get('packageBidsId')"></render-error>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-md-6">
                <label>Tên hợp đồng<span class="text-danger"><b> *</b></span>
                </label>
                <input-text class="form-control" placeholder="Tên hợp đồng" formControlName="contractName">
                </input-text>
                <render-error [data]="myForm.get('contractName')"></render-error>
              </div>
              <div class="form-group col-md-6">
                <label>Số hợp đồng<span class="text-danger"><b> *</b></span>
                </label>
                <input-text class="form-control" placeholder="Số hợp đồng" formControlName="contractCode">
                </input-text>
                <render-error [data]="myForm.get('contractCode')"></render-error>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-md-6">
                <label>Số quyết định</label>
                <input-text class="form-control" placeholder="Số quyết định" formControlName="decisionNumber">
                </input-text>
              </div>
              <div class="form-group col-md-6">
                <label>Ngày quyết định</label>
                <input-date class="form-control" placeholder="dd/mm/yyyy" formControlName="dateOfSignedDecision">
                </input-date>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-md-6">
                <label>Ngày ký</label>
                <input-date class="form-control" placeholder="dd/mm/yyyy" formControlName="signedOn"></input-date>
              </div>
              <div class="form-group col-md-6">
                <label>
                  Người phụ trách</label>
                <input-text class="form-control" placeholder="Người phụ trách" formControlName="persionInChange">
                </input-text>
              </div>
            </div>
          </fieldset>

          <fieldset>
            <legend class="font-weight-semibold text-uppercase font-size-sm">
              Chi tiết
            </legend>
            <div class="row">
              <div class="form-group col-md-6">
                <label>Phân loại</label>
                <input-select class="form-control" formControlName="contractClassification"
                  [items]="listContractClassification" [placeholder]="'Lựa chọn'">
                </input-select>
              </div>
              <div class="form-group col-md-6">
                <label>Hình thức</label>
                <input-select class="form-control" formControlName="contractFormId" [items]="listcontractForm"
                  [placeholder]="'Lựa chọn'">
                </input-select>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-md-6">
                <label>Trạng thái</label>
                <input-select class="form-control" formControlName="statusId" [items]="listStatus"
                  [placeholder]="'Lựa chọn'">
                </input-select>
              </div>
              <div class="form-group col-md-6">
                <label>Loại tiền<span class="text-danger"><b> *</b></span></label>
                <input-select class="form-control" formControlName="currency" [items]="listCurrency"
                  [placeholder]="'Lựa chọn'">
                </input-select>
                <render-error [data]="myForm.get('currency')"></render-error>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-md-6">
                <label>Tỉ giá</label>
                <input-float formControlName="exchangeRate" class="form-control" [step]="0.01" [min]="0"
                  [placeholder]="'0.00'">
                </input-float>
              </div>
              <div class="form-group col-md-6">
                <label>Giá trị hợp đồng <span class="text-danger"><b> *</b></span></label>
                <input-float formControlName="contractValue" class="form-control" [step]="1000000" [min]=0
                  [placeholder]="'0.00'">
                </input-float>
                <render-error [data]="myForm.get('contractValue')"></render-error>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-md-6">
                <label>Giá trị giảm trừ</label>
                <input-float formControlName="deductibleValue" class="form-control" [step]="1000000" [min]="0"
                  [placeholder]="'0.00'">
                </input-float>
              </div>
              <div class="form-group col-md-6">
                <label>Điều khoản</label>
                <input-select class="form-control" formControlName="termsOfPaymentId" [items]="listTermsOfPayment"
                  [placeholder]="'Lựa chọn'">
                </input-select>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-md-6">
                <label>Hình thức thanh toán</label>
                <input-select class="form-control" formControlName="paymentTypeId" [items]="listPaymentType"
                  [placeholder]="'Lựa chọn'">
                </input-select>
              </div>
              <div class="form-group col-md-6">
                <label>Thời gian thực hiện HĐ</label>
                <input-number [min]="0" class="form-control control-content" placeholder="Thời gian thục hiện HĐ"
                  formControlName="durationOfContract"></input-number>
              </div>
            </div>

            <div class="row">
              <div class="form-group col-md-6">
                <label>Ngày hiệu lực</label>
                <input-date class="form-control" placeholder="dd/mm/yyyy" formControlName="effectiveDate"></input-date>
              </div>
              <div class="form-group col-md-6">
                <label>Ngày hết hạn</label>
                <input-date class="form-control" placeholder="dd/mm/yyyy" formControlName="expiryDate"></input-date>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-md-6">
                <label>Ngày bảo lãnh TƯ</label>
                <input-date class="form-control" placeholder="dd/mm/yyyy" formControlName="dateOfAdvanceGuarantee">
                </input-date>
              </div>
              <div class="form-group col-md-6">
                <label>Ngày kết thúc BLTƯ</label>
                <input-date class="form-control" placeholder="dd/mm/yyyy" formControlName="endDateOfAdvGuar">
                </input-date>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-md-6">
                <label>Bảo lãnh tạm ứng %</label>
                <input-number [min]="0" [step]="1" class="form-control" (onChange)="hasValue()" [placeholder]="0"
                  formControlName="percentAdvanceGuarantee"></input-number>
              </div>
              <div class="form-group col-md-6">
                <label>Tiền BLTƯ</label>
                <input-float formControlName="amountOfAdvGuar" class="form-control" [step]="1000000" [min]="0"
                  [placeholder]="'0.00'">
                </input-float>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-md-6">
                <label>Ngày bảo lãnh THHĐ</label>
                <input-date class="form-control" placeholder="dd/mm/yyyy" formControlName="dateOfMakeAdvGuar">
                </input-date>
              </div>
              <div class="form-group col-md-6">
                <label>Ngày kết thúc BLTƯ</label>
                <input-date class="form-control" placeholder="dd/mm/yyyy" formControlName="endDateOfMakeAdvGuar">
                </input-date>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-md-6">
                <label>Bảo lãnh THHĐ %</label>
                <input-number [min]="0" [step]="1" class="form-control" (onChange)="hasValue()" [placeholder]="0"
                  formControlName="percentOfMakeAdvGuar"></input-number>

              </div>
              <div class="form-group col-md-6">
                <label>Tiền bảo lãnh THHĐ</label>
                <input-float formControlName="amountOfMakeAdvGuar" class="form-control" [step]="1000000" [min]="0"
                  [placeholder]="'0.00'">
                </input-float>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-md-6">
                <label>Ngày kết thúc BH</label>
                <input-date class="form-control" placeholder="dd/mm/yyyy" formControlName="warrantyEndDate">
                </input-date>
              </div>
              <div class="form-group col-md-6">
                <label>Ngày thanh lý</label>
                <input-date class="form-control" placeholder="dd/mm/yyyy" formControlName="liquidationDay"></input-date>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-md-6">
                <label>Bảo lãnh bảo hành %</label>
                <input-number [min]="0" [step]="1" class="form-control" (onChange)="hasValue()" [placeholder]="0"
                  formControlName="percentGuarOfWarranty"></input-number>
              </div>
              <div class="form-group col-md-6">
                <label>Tiền bảo lãnh BH</label>
                <input-float formControlName="amountGuarOfWarranty" class="form-control" [step]="1000000" [min]="0"
                  [placeholder]="'0.00'">
                </input-float>
              </div>
            </div>
          </fieldset>

          <fieldset>
            <legend class="font-weight-semibold text-uppercase font-size-sm">
              Nhiều hơn
            </legend>
            <div class="row">
              <div class="form-group col-md-4">
                <label>Thứ tự </label>
                <input-number [min]="0" class="form-control" [placeholder]="0" formControlName="index"></input-number>
              </div>
            </div>
            <div class="row ">
              <div class="form-group col-md-12">
                <label>Ghi chú</label>
                <input-textarea class="form-control" rows="5" formControlName="note"></input-textarea>
              </div>
            </div>
          </fieldset>
          <!-- /content area -->
          <div class="text-right mt-4">
            <button class="btn btn-primary mr-3" [disabled]="isLoading" (click)="submit(true)" [hidden]="isView">
              <i nz-icon="" nztype="close-circle" class="anticon anticon-close-circle mr-1"
                ng-reflect-nz-type="close-circle"></i>
              {{isLoading ? 'Đang tải...':'Lưu đóng'}} </button>
            <button class="btn btn-primary" [disabled]="isLoading" (click)="submit(false)" [hidden]="isView"><i
                class="anticon mr-1 anticon-plus-circle" nz-icon="" nztheme="outline" nztype="plus-circle"
                ng-reflect-nz-type="plus-circle" ng-reflect-nz-theme="outline"></i>
              {{isLoading ? 'Đang tải...':'Lưu'}}</button>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="tab-pane fade mt-2" [ngClass]="{'active show': openTab === 2}">
    <app-payment-schedule [contractId]="id" [projectId]="projGeneralId" [isViewContracts]="isView">
    </app-payment-schedule>
  </div>
  <div class="tab-pane fade mt-2" [ngClass]="{'active show': openTab === 3}">
    <app-project-document [contractId]="id" [projGeneralId]="projGeneralId" [packageBidId]="packageBidsId"
      [isView]="isView"></app-project-document>
  </div>
</div>
